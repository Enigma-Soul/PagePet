name: GitHub Actions Test
run-name: ${{ github.actor }} is testing out GitHub Actions ğŸš€
on:
    discussion:
        types: [ created ]
permissions:
    contents: write  # æ›´ç²¾å‡†çš„æƒé™æ§åˆ¶

jobs:
    run_demo_actions:
        runs-on: ubuntu-latest
        steps:
            -   name: Checkout code
                uses: actions/checkout@v3
            
            -   name: Set up Python
                uses: actions/setup-python@v4  # å‡çº§åˆ°æœ€æ–°v4ç‰ˆæœ¬
                with:
                    python-version: '3.10'
            
            -   name: Install dependencies
                run: pip install -r ./requirements.txt
            
            -   name: Run main script
                run: python test_main.py
            
            -   name: Create output directory
                run: mkdir -p output  # ç¡®ä¿è¾“å‡ºç›®å½•å­˜åœ¨
                
            -   name: Commit and push
                uses: stefanzweifel/git-auto-commit-action@v5
                with:
                    commit_message: "Update text file"
                    file_pattern: output/test.txt
                    branch: main